import{r as u,o as i,c as d,w as y,d as b,v,a as o,e as S,f as N,g as _,F as $,h as A,i as I,t as m}from"./index--w5M2cMr.js";const E=o("option",{disabled:"",value:""},"Select a unit",-1),B=o("option",null,"Times",-1),x=o("option",null,"Min",-1),C=[E,B,x],T=o("button",{class:"newHabitBtn",type:"submit"},"Add New Habit",-1),V={__name:"NewHabit",emits:["habitAdded"],setup(p,{emit:l}){const n=u(""),t=u(""),e=u(""),c=u(""),r=u(!1);let f=localStorage.getItem("token")?JSON.parse(localStorage.getItem("token")):null;console.log(f);const w=l,k=()=>{fetch("http://localhost:3000/habits",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify({habitName:n.value,numVal:t.value,unit:e.value,comment:c.value,completed:!1,updatedAt:new Date})}).then(h=>h.json()).then(h=>{w("habitAdded",h),H()})},g=h=>{r.value=h},H=()=>{n.value="",t.value="",e.value="",c.value=""};return(h,a)=>(i(),d("div",null,[r.value?(i(),d("form",{key:0,onSubmit:y(k,["prevent"]),id:"newHabitContainer"},[b(o("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s),class:"newForm",type:"text",placeholder:"New Habit"},null,512),[[v,n.value]]),b(o("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>t.value=s),class:"newForm",type:"number",placeholder:"Amount of"},null,512),[[v,t.value]]),b(o("select",{"onUpdate:modelValue":a[2]||(a[2]=s=>e.value=s)},C,512),[[S,e.value]]),b(o("input",{"onUpdate:modelValue":a[3]||(a[3]=s=>c.value=s),class:"newForm",type:"textbox",placeholder:"Additional Comments"},null,512),[[v,c.value]]),T],32)):N("",!0),r.value?(i(),d("button",{key:1,onClick:a[4]||(a[4]=s=>g(!1)),class:"newHabitBtn"}," Nevermind ")):(i(),d("button",{key:2,onClick:a[5]||(a[5]=s=>g(!0)),class:"newHabitBtn"}," Add Habit "))]))}},F={class:"=addRecord"},O={__name:"HabitRecord",props:["habitId"],setup(p){let l=localStorage.getItem("token")?JSON.parse(localStorage.getItem("token")):null;console.log(l);const n=p,t=()=>{fetch(`http://localhost:3000/habits/${n.habitId}/done`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({note:""})}).then(e=>{if(!e.ok)throw new Error("Failed to add record");return e.json()}).then(e=>{console.log("Record added successfully:",e)}).catch(e=>{console.error("Error adding record:",e)})};return(e,c)=>(i(),d("div",F,[o("button",{type:"button",onClick:t},"Done")]))}},j=o("h2",{class:"habitsHeader"},"My Daily Habits",-1),J=o("p",null,"Code for 30 minutes a day",-1),z={__name:"ListHabits",setup(p){const l=u([]);let n=localStorage.getItem("token")?JSON.parse(localStorage.getItem("token")):null;console.log(n),fetch("http://localhost:3000/habits",{method:"GET",headers:{Authorization:`Bearer ${n}`}}).then(e=>{if(!e.ok)throw new Error("Failed to fetch user data");return e.json()}).then(e=>{l.value=e}).catch(e=>{console.error("Error fetching user data:",e)});const t=()=>{fetch("http://localhost:3000/habits",{method:"GET",headers:{Authorization:`Bearer ${n}`}}).then(e=>{if(!e.ok)throw new Error("Failed to fetch user data");return e.json()}).then(e=>{l.value=e}).catch(e=>{console.error("Error fetching user data:",e)})};return(e,c)=>(i(),d("div",null,[o("div",null,[_(V,{onHabitAdded:t})]),j,J,o("ul",null,[(i(!0),d($,null,A(l.value,r=>(i(),d("li",{key:r._id},[I(m(r.habitName)+"/ "+m(r.numVal)+" "+m(r.unit)+"/ "+m(r.comment)+" ",1),_(O,{habitId:r._id},null,8,["habitId"])]))),128))])]))}},M={__name:"Habits",setup(p){const l=u([]);let n=localStorage.getItem("token")?JSON.parse(localStorage.getItem("token")):null;return console.log(n),fetch("http://localhost:3000/user",{method:"GET",headers:{Authorization:`Bearer ${n}`}}).then(t=>{if(!t.ok)throw new Error("Failed to fetch user data");return t.json()}).then(t=>{l.value=t}).catch(t=>{console.error("Error fetching user data:",t)}),(t,e)=>(i(),d("div",null,[o("h1",null,"Hello "+m(l.value.username),1),_(z)]))}};export{M as default};
